import{B as h,H as k,C as n,D as c,E,F as v,G as y,I as A,b as N,J as S,f as g}from"./runtime.D2eEK9dr.js";import{h as o,r as D,s as _,a as F}from"./disclose-version.Cba7F6-8.js";function q(f,a,i,r=null,t=!1){var s=null,e=null,l=null,T=t?v:0;h(f,T,()=>{if(l===(l=!!a()))return;let u=!1;if(o){const b=f.data===k;l===b&&(D(F),_(!1),u=!0)}l?(s?n(s):s=c(()=>i(f)),e&&E(e,()=>{e=null})):(e?n(e):r&&(e=c(()=>r(f))),s&&E(s,()=>{s=null})),u&&_(!0)})}function d(f,a){var r;var i=f&&((r=f[g])==null?void 0:r.t);return f===a||i===a}function x(f,a,i,r){y(()=>{var t,s;return A(()=>{t=s,s=[],N(()=>{f!==i(...s)&&(a(f,...s),t&&d(i(...t),f)&&a(null,...t))})}),()=>{S(()=>{s&&d(i(...s),f)&&a(null,...s)})}})}export{x as b,q as i};
